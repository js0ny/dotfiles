# $DOTFILES/tools/zsh/common.zshrc
# vim:ft=zsh
# Date: 2024-11-30
# Author: js0ny
# This is the entry point for all zsh configuration files
# 这是所有zsh配置文件的入口点

# Location: $ZDOTDIR/.zshrc (default: $HOME/.zshrc)
# Linking:
# ln -sf $DOTFILES/tools/zsh/common.zshrc $ZDOTDIR/.zshrc

export DOTFILES=$HOME/.dotfiles

case "$(uname)" in
  Linux)
    if grep -q Microsoft /proc/version || [[ -n "$WSL_DISTRO_NAME" ]]; then
      # WSL-specific configuration
        export IS_WSL=true
        source $DOTFILES/home/dot_config/zsh/winterop.zsh
    else
      # Native Linux configuration
        if [ -n "$WAYLAND_DISPLAY" ]; then
            alias clip="wl-copy"
            alias paste="wl-paste"
        elif [ -n "$DISPLAY" ]; then
            alias clip="xclip"
        fi
    fi
    ;;
  Darwin)
    # macOS-specific configuration
    alias clip="pbcopy"
    alias paste="pbpaste"
    ;;
    #   CYGWIN*|MINGW*|MSYS*)
    #     source "$DOTFILES/platform/wsl.zsh"
    #     ;;
esac

for file in $DOTFILES/home/dot_config/zsh/mod/*.zsh; do
  source $file
done

[ -f "/home/js0ny/.local/share/ghcup/env" ] && . "/home/js0ny/.local/share/ghcup/env" # ghcup-env
